# PubMed RAG 

一款专为医学研究人员、学生和临床医生设计的浏览器插件。它将先进的生成式AI（以Gemini和OpenAI兼容模型为主）与用户的研究工作流深度融合，旨在将一个宽泛的研究兴趣，通过人机协同的方式，转化为一份结构清晰、有理有据的文献综述报告。

## 核心解决的问题

-   **信息过载**: PubMed文献浩如烟海，手动筛选、阅读、总结耗时巨大。
-   **研究起点模糊**: 从一个模糊的想法到一个明确的研究问题，路径不清晰。
-   **文献总结效率低**: 阅读多篇全文后，在大脑中进行综合、提炼和撰写报告是一项高强度的认知劳动。

## 核心设计哲学

本项目并非一个全自动工具，而是一个**“智能研究代理” (Intelligent Research Agent)**。它遵循“人类在环路中”(Human-in-the-loop)的设计哲学，在关键节点与用户协商，确保AI的强大能力始终服务于用户的真实意图。

-   **分阶段的状态机**: 将复杂的研究流程拆解为清晰、可控的几个阶段。
-   **结构化的多层Prompt**: 为每个阶段设计专门的、高度优化的LLM指令。

## 技术架构 (纯插件模式)

本插件采用纯前端、无后端的架构，所有计算和API请求都在用户浏览器内部完成。

-   **框架**: Plasmo
-   **前端**: React + TypeScript
-   **状态管理**: Zustand
-   **数据持久化**: `chrome.storage.local`

## 详细工作流程 (三阶段模型)

#### 第一阶段: 规划与协商 (人机对话)

1.  **[用户] 输入研究兴趣**: 用户在PubMed网站打开插件侧边栏，输入研究主题。
2.  **[插件] 任务分解**: 后台调用LLM（扮演“科研策略顾问”），将主题分解为子问题和关键词，并返回一个澄清问题。
3.  **[用户] 协商与确认**: 侧边栏展示研究计划，用户可编辑或直接确认。

#### 第二阶段: 自动初筛与评估 (插件自主执行)

1.  **[插件] 自动信息检索**: 根据计划中的关键词，静默获取PubMed搜索结果页，并提取摘要。
2.  **[插件] 智能信源评估**: 后台调用LLM（扮演“文献审阅人”），为每篇摘要打分并给出评审理由。
3.  **[用户] 筛选信源**: 侧边栏展示带评分的文献列表，用户勾选最相关的几篇。

#### 第三阶段: 人类辅助深度阅读与综述 (人机协作)

1.  **[插件/用户] “人类辅助”全文获取**: 插件按速率限制，逐一打开新标签页抓取用户所选文献的全文。
2.  **[插件] 深度阅读与综述生成**: 后台调用LLM（扮演“研究综述员”），根据全文和研究计划，撰写一份结构化的文献综述报告。
3.  **[用户] 查看与导出报告**: 最终报告以优美的Markdown格式呈现在侧边栏中，可供复制或导出。

## 开发路线图

-   ✅ **里程碑 1: 项目搭建与设置页面** - 已完成基础框架搭建。
-   ➡️ **里程碑 2: 实现第一阶段 - “与AI对话”** - 当前的核心任务。
-   **里程碑 3: 实现第二阶段 - “让AI去搜索和评估”**
-   **里程碑 4: 实现第三阶段 - “生成最终报告”**
-   **里程碑 5: 优化与打磨**

---

请将以上文件替换您项目中的旧文件。这个新的结构为您清晰地规划了后续的开发路径，并完成了**里程碑1**的大部分工作。您现在可以专注于**里程碑2**，即在`background.ts`和`pubmed-sidebar.tsx`中完善第一阶段的交互逻辑。